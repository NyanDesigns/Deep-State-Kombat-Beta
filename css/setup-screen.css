/* Setup Screen - Tekken-Style Character Selection UI */

#setup-screen {
    position: absolute !important;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(ellipse at center, rgba(20, 20, 30, 0.95) 0%, rgba(5, 5, 10, 0.98) 100%) !important;
    padding: 20px;
    box-sizing: border-box;
    display: flex !important;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    overflow: hidden;
    z-index: 50;
    pointer-events: auto;
}

/* Full-Screen Background Character Preview */
#background-character-preview {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    pointer-events: none;
}

/* Player Background Preview Containers */
.player-background-preview {
    position: absolute;
    top: 0;
    width: 50%;
    height: 100%;
    z-index: 1;
}

#p1-background-preview {
    left: 0;
}

#p2-background-preview {
    right: 0;
}

.background-png {
    position: absolute;
    top: 60%;
    transform: translateY(-50%);
    width: 1360px;
    height: 1360px;
    object-fit: contain;
    z-index: 1;
    filter: drop-shadow(0 0 30px rgba(255, 100, 0, 0.5))
            drop-shadow(0 0 60px rgba(255, 69, 0, 0.3));
    /* Initially hidden during loading */
    opacity: 0;
    visibility: hidden;
}

/* P1 PNG on left side - closer to center */
.p1-png {
    left: -100%; /* Start off-screen to the left */
    transform: translateY(-50%);
    opacity: 0;
    transition: none; /* Remove transition, use animation instead */
}

/* P2 PNG on right side, mirrored - closer to center */
.p2-png {
    right: -100%; /* Start off-screen to the right */
    transform: translateY(-50%) scaleX(-1);
    opacity: 0;
    transition: none; /* Remove transition, use animation instead */
}

/* Slide-in animation for P1 PNG (from left) */
.p1-png.slide-in {
    opacity: 1;
    visibility: visible;
    animation: p1SlideIn 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards,
               character-breathe 4s ease-in-out 1s infinite;
}

/* Unavailable characters use different breathe animation */
.p1-png.unavailable.slide-in {
    opacity: 1;
    visibility: visible;
    animation: p1SlideIn 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards,
               character-breathe-unavailable 4s ease-in-out 1s infinite;
}

@keyframes p1SlideIn {
    0% {
        left: -100%;
        opacity: 0;
        transform: translateY(-50%);
    }
    100% {
        left: -30%;
        opacity: 1;
        transform: translateY(-50%);
    }
}

/* Slide-in animation for P2 PNG (from right) */
.p2-png.slide-in {
    opacity: 1;
    visibility: visible;
    animation: p2SlideIn 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards,
               character-breathe-p2 4s ease-in-out 1s infinite;
}

/* Unavailable characters use different breathe animation */
.p2-png.unavailable.slide-in {
    opacity: 1;
    visibility: visible;
    animation: p2SlideIn 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards,
               character-breathe-unavailable-p2 4s ease-in-out 1s infinite;
}

@keyframes p2SlideIn {
    0% {
        right: -100%;
        opacity: 0;
        transform: translateY(-50%) scaleX(-1);
    }
    100% {
        right: -30%;
        opacity: 1;
        transform: translateY(-50%) scaleX(-1);
    }
}

/* Selected state: stop animation, keep at max size, add drop shadow and glow, move down */
.p1-png.selected {
    animation: none !important; /* Override slide-in and breathe animations */
    left: -30% !important; /* Ensure final position */
    transform: translateY(-45%) scale(1.15);
    filter: drop-shadow(-6px 6px 0px #000)
            drop-shadow(-7px 7px 0px #000)
            drop-shadow(-8px 8px 0px #000)
            drop-shadow(-9px 9px 0px #000)
            drop-shadow(-10px 10px 6px rgba(0, 0, 0, 0.8))
            drop-shadow(0 0 40px rgba(255, 140, 0, 0.5))
            drop-shadow(0 0 80px rgba(255, 100, 0, 0.3));
}

/* Unavailable characters stay grayscale even when selected */
.p1-png.unavailable.selected {
    filter: grayscale(100%) brightness(0.8)
            drop-shadow(-6px 6px 0px #000)
            drop-shadow(-7px 7px 0px #000)
            drop-shadow(-8px 8px 0px #000)
            drop-shadow(-9px 9px 0px #000)
            drop-shadow(-10px 10px 6px rgba(0, 0, 0, 0.8))
            drop-shadow(0 0 40px rgba(128, 128, 128, 0.5))
            drop-shadow(0 0 80px rgba(100, 100, 100, 0.3));
}

.p2-png.selected {
    animation: none !important; /* Override slide-in and breathe animations */
    right: -30% !important; /* Ensure final position */
    transform: translateY(-45%) scaleX(-1) scale(1.15);
    filter: drop-shadow(-6px 6px 0px #000)
            drop-shadow(-7px 7px 0px #000)
            drop-shadow(-8px 8px 0px #000)
            drop-shadow(-9px 9px 0px #000)
            drop-shadow(-10px 10px 6px rgba(0, 0, 0, 0.8))
            drop-shadow(0 0 40px rgba(255, 140, 0, 0.5))
            drop-shadow(0 0 80px rgba(255, 100, 0, 0.3));
}

/* Silhouette preview effect - black gradient fill for add-new button hover */
/* Use higher specificity to override all other filter styles */
/* Only apply brightness/contrast to the image itself, preserve the original drop-shadow glow */
.p1-png.silhouette-preview,
.p2-png.silhouette-preview,
.background-png.silhouette-preview {
    /* Make the image completely black (silhouette) with gradient dark black effect */
    /* Only apply brightness/contrast filters - preserve original drop-shadow from .background-png */
    filter: brightness(0) contrast(1.2)
            drop-shadow(0 0 30px rgba(255, 100, 0, 0.5))
            drop-shadow(0 0 60px rgba(255, 69, 0, 0.3)) !important;
    /* The brightness(0) makes it pure black, creating a silhouette effect */
    /* Contrast enhances the edges to make the silhouette shape more defined */
    /* Keep original drop-shadow colors to maintain the orange glow effect */
}

/* Ensure silhouette works even when slide-in class is present */
.p1-png.slide-in.silhouette-preview,
.p2-png.slide-in.silhouette-preview {
    filter: brightness(0) contrast(1.2)
            drop-shadow(0 0 30px rgba(255, 100, 0, 0.5))
            drop-shadow(0 0 60px rgba(255, 69, 0, 0.3)) !important;
}

/* Unavailable characters stay grayscale even when selected */
.p2-png.unavailable.selected {
    filter: grayscale(100%) brightness(0.8)
            drop-shadow(-6px 6px 0px #000)
            drop-shadow(-7px 7px 0px #000)
            drop-shadow(-8px 8px 0px #000)
            drop-shadow(-9px 9px 0px #000)
            drop-shadow(-10px 10px 6px rgba(0, 0, 0, 0.8))
            drop-shadow(0 0 40px rgba(128, 128, 128, 0.5))
            drop-shadow(0 0 80px rgba(100, 100, 100, 0.3));
}

/* Unavailable characters stay grayscale when focused (slide-in state) */
.p1-png.unavailable.slide-in,
.p1-png.unavailable {
    filter: grayscale(100%) brightness(0.8)
            drop-shadow(0 0 30px rgba(128, 128, 128, 0.5))
            drop-shadow(0 0 60px rgba(100, 100, 100, 0.3));
}

.p2-png.unavailable.slide-in,
.p2-png.unavailable {
    filter: grayscale(100%) brightness(0.8)
            drop-shadow(0 0 30px rgba(128, 128, 128, 0.5))
            drop-shadow(0 0 60px rgba(100, 100, 100, 0.3));
}

@keyframes character-breathe-p2 {
    0%, 100% {
        transform: translateY(-50%) scaleX(-1) scale(1);
        filter: drop-shadow(0 0 30px rgba(255, 100, 0, 0.5))
                drop-shadow(0 0 60px rgba(255, 69, 0, 0.3));
    }
    50% {
        transform: translateY(-50%) scaleX(-1) scale(1.02);
        filter: drop-shadow(0 0 40px rgba(255, 140, 0, 0.6))
                drop-shadow(0 0 80px rgba(255, 100, 0, 0.4));
    }
}

/* Unavailable characters breathe animation - keep grayscale */
@keyframes character-breathe-unavailable-p2 {
    0%, 100% {
        transform: translateY(-50%) scaleX(-1) scale(1);
        filter: grayscale(100%) brightness(0.8)
                drop-shadow(0 0 30px rgba(128, 128, 128, 0.5))
                drop-shadow(0 0 60px rgba(100, 100, 100, 0.3));
    }
    50% {
        transform: translateY(-50%) scaleX(-1) scale(1.02);
        filter: grayscale(100%) brightness(0.8)
                drop-shadow(0 0 40px rgba(140, 140, 140, 0.6))
                drop-shadow(0 0 80px rgba(120, 120, 120, 0.4));
    }
}

@keyframes character-breathe {
    0%, 100% {
        transform: translateY(-50%) scale(1);
        filter: drop-shadow(0 0 30px rgba(255, 100, 0, 0.5))
                drop-shadow(0 0 60px rgba(255, 69, 0, 0.3));
    }
    50% {
        transform: translateY(-50%) scale(1.02);
        filter: drop-shadow(0 0 40px rgba(255, 140, 0, 0.6))
                drop-shadow(0 0 80px rgba(255, 100, 0, 0.4));
    }
}

/* Unavailable characters breathe animation - keep grayscale */
@keyframes character-breathe-unavailable {
    0%, 100% {
        transform: translateY(-50%) scale(1);
        filter: grayscale(100%) brightness(0.8)
                drop-shadow(0 0 30px rgba(128, 128, 128, 0.5))
                drop-shadow(0 0 60px rgba(100, 100, 100, 0.3));
    }
    50% {
        transform: translateY(-50%) scale(1.02);
        filter: grayscale(100%) brightness(0.8)
                drop-shadow(0 0 40px rgba(140, 140, 140, 0.6))
                drop-shadow(0 0 80px rgba(120, 120, 120, 0.4));
    }
}

.background-gradient-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        radial-gradient(ellipse at 30% 50%, rgba(255, 69, 0, 0.3) 0%, transparent 50%),
        radial-gradient(ellipse at 70% 50%, rgba(255, 140, 0, 0.25) 0%, transparent 50%),
        linear-gradient(
            to bottom,
            rgba(20, 0, 0, 0.3) 0%,
            rgba(40, 20, 0, 0.4) 30%,
            rgba(20, 10, 0, 0.6) 60%,
            rgba(0, 0, 0, 0.9) 100%
        );
    pointer-events: none;
    animation: fire-flicker 3s ease-in-out infinite;
}

@keyframes fire-flicker {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.9;
    }
}

/* Fire effect particles */
#background-character-preview::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        radial-gradient(circle at 20% 80%, rgba(255, 100, 0, 0.4) 0%, transparent 30%),
        radial-gradient(circle at 50% 90%, rgba(255, 69, 0, 0.5) 0%, transparent 25%),
        radial-gradient(circle at 80% 85%, rgba(255, 140, 0, 0.3) 0%, transparent 35%);
    animation: fire-glow 2s ease-in-out infinite alternate;
    pointer-events: none;
    z-index: 1;
}

@keyframes fire-glow {
    0% {
        opacity: 0.6;
        filter: blur(30px);
    }
    100% {
        opacity: 0.9;
        filter: blur(50px);
    }
}

/* Fire Particle Effect Canvas - Behind PNG (full height particles) */
#fire-particles-canvas-back {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0.3; /* Behind PNG images (z-index: 1) - lower to ensure it's behind */
    pointer-events: none;
    opacity: 1.0;
}

/* Fire Particle Effect Canvas - In Front of PNG (half height particles) */
#fire-particles-canvas-front {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1.5; /* In front of PNG images (z-index: 1), behind grid (z-index: 10) */
    pointer-events: none;
    opacity: 1.0;
    /* Gradient mask that fades out at the top - starts fading at 40% from bottom, fully transparent at top */
    mask-image: linear-gradient(to top, 
        rgba(0, 0, 0, 1) 0%, 
        rgba(0, 0, 0, 1) 40%, 
        rgba(0, 0, 0, 0.8) 50%, 
        rgba(0, 0, 0, 0.4) 60%, 
        rgba(0, 0, 0, 0.1) 70%, 
        rgba(0, 0, 0, 0) 80%);
    -webkit-mask-image: linear-gradient(to top, 
        rgba(0, 0, 0, 1) 0%, 
        rgba(0, 0, 0, 1) 40%, 
        rgba(0, 0, 0, 0.8) 50%, 
        rgba(0, 0, 0, 0.4) 60%, 
        rgba(0, 0, 0, 0.1) 70%, 
        rgba(0, 0, 0, 0) 80%);
}

/* Character Info Panel (Bottom Left) - HUD Redesign */
#character-info-panel {
    position: fixed;
    bottom: calc(68px + 68px + 51px);
    left: 43px;
    z-index: 15;
    /* Transparent digital HUD background */
    background: 
        repeating-linear-gradient(0deg, rgba(255, 255, 255, 0.05) 0px, rgba(255, 255, 255, 0.05) 1px, transparent 1px, transparent 4px),
        rgba(15, 15, 20, 0.8);
    border: 2px solid rgba(255, 165, 0, 0.3);
    border-radius: 0;
    padding: 21px 26px;
    width: 238px;
    min-width: 238px;
    max-width: 238px;
    min-height: 102px;
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(10px);
    box-sizing: border-box;
    opacity: 0;
    visibility: hidden;
    transform: scale(0);
    transform-origin: left bottom;
    /* Tech-notched corners */
    clip-path: polygon(
        0 13px, 13px 0, 
        calc(100% - 13px) 0, 100% 13px, 
        100% calc(100% - 13px), calc(100% - 13px) 100%, 
        13px 100%, 0 calc(100% - 13px)
    );
    transition: none; /* Remove transition, use animation instead */
}

/* L-Shaped Brackets for Stats Panel */
#character-info-panel::before,
#character-info-panel::after {
    content: '';
    position: absolute;
    width: 26px;
    height: 26px;
    pointer-events: none;
    z-index: 5;
}

#character-info-panel::before {
    top: 0;
    left: 0;
    border-top: 5px solid #ffa500;
    border-left: 5px solid #ffa500;
}

#character-info-panel::after {
    bottom: 0;
    right: 0;
    border-bottom: 5px solid #ffa500;
    border-right: 5px solid #ffa500;
}

/* Pop-in animation for info panel */
#character-info-panel.pop-visible {
    opacity: 1;
    visibility: visible;
    animation: panelPopIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

@keyframes panelPopIn {
    0% {
        opacity: 0;
        transform: scale(0);
    }
    60% {
        opacity: 1;
        transform: scale(1.1);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

#character-info-panel.loaded {
    opacity: 1;
    visibility: visible;
    transform: scale(1);
}


    .character-info-content {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.character-name-display {
    font-family: 'Arial Black', 'Franklin Gothic Bold', 'Impact', sans-serif;
    font-size: 4.25em;
    font-weight: 900;
    color: #fff;
    text-transform: uppercase;
    letter-spacing: 7px;
    text-shadow: 
        3px 3px 0px #000,
        4px 4px 0px #000,
        5px 5px 0px #000,
        6px 6px 0px #000,
        7px 7px 5px rgba(0, 0, 0, 0.8);
    line-height: 1.2;
    position: fixed;
    bottom: 34px;
    z-index: 16;
    margin: 0;
    opacity: 0;
    visibility: hidden;
    transform: scale(0); /* Start with scale 0 for pop effect */
    transition: none; /* Remove transition, use animation instead */
}

/* Pop-in animation for character name displays */
.character-name-display.pop-visible {
    opacity: 1;
    visibility: visible;
    animation: namePopIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

@keyframes namePopIn {
    0% {
        opacity: 0;
        transform: scale(0);
    }
    60% {
        opacity: 1;
        transform: scale(1.1);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

.character-name-display.loaded {
    opacity: 1;
    visibility: visible;
    transform: scale(1);
}

.character-name-p1 {
    left: 43px;
}

.character-name-p2 {
    right: 43px;
    left: auto;
}

/* Character Record & Difficulty - Digital Style */
.character-record {
    font-family: 'Courier New', monospace;
    font-size: 1.19em;
    font-weight: bold;
    color: #ffcc00;
    text-shadow: 0 0 10px rgba(255, 165, 0, 0.5);
    letter-spacing: 1px;
    background: rgba(255, 165, 0, 0.1);
    padding: 3px 7px;
    border-left: 3px solid #ffa500;
    margin-bottom: 7px;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.4s ease 0.2s, visibility 0.4s ease 0.2s;
}

#character-info-panel.loaded .character-record {
    opacity: 1;
    visibility: visible;
}

.character-difficulty {
    font-family: 'Courier New', monospace;
    font-size: 1.02em;
    font-weight: bold;
    color: #00ff00;
    text-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
    text-transform: uppercase;
    letter-spacing: 2px;
    background: rgba(0, 255, 0, 0.1);
    padding: 3px 7px;
    border-left: 3px solid #00ff00;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.4s ease 0.2s, visibility 0.4s ease 0.2s;
}

#character-info-panel.loaded .character-difficulty {
    opacity: 1;
    visibility: visible;
}

/* CPU Player Indicator (Top Right) */
#press-start-text {
    position: fixed;
    top: 26px;
    right: 26px;
    z-index: 15;
    font-size: 1.53em;
    font-weight: 900;
    color: #fff;
    text-transform: uppercase;
    letter-spacing: 3px;
    text-shadow: 0 0 20px #ff0000,
                 0 0 40px #ff6600,
                 0 4px 8px rgba(0, 0, 0, 0.8);
    animation: blink-press-start 2s infinite;
}

@keyframes blink-press-start {
    0%, 50%, 100% {
        opacity: 1;
    }
    25%, 75% {
        opacity: 0.4;
    }
}

/* Main Title - Game Logo Style */
#setup-screen h1.game-title-logo {
    color: #fff;
    font-size: 5.1em; /* Final size */
    font-weight: 900;
    letter-spacing: 0;
    margin: 0;
    text-align: center;
    z-index: 10;
    position: fixed;
    top: 68px; /* Final position */
    left: 50%;
    transform: translate(-50%, 0); /* Center horizontally */
    line-height: 1;
    text-transform: uppercase;
    text-shadow: none !important;
    border: none;
    display: flex;
    flex-direction: column;
    gap: 0;
    box-shadow: none;
    align-items: center;
    /* Initial hidden state for loading sequence - start above screen */
    opacity: 0;
    transform: translate(-50%, -100%); /* Start above screen */
    transition: none; /* Remove transition, use animation instead */
}

/* Title visible state - triggers animation */
#setup-screen h1.game-title-logo.title-visible {
    opacity: 1;
    animation: titleSlideIn 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

/* Title slide-in animation: slide in from top */
@keyframes titleSlideIn {
    0% {
        opacity: 0;
        transform: translate(-50%, -100%);
    }
    100% {
        opacity: 1;
        transform: translate(-50%, 0);
    }
}

.title-word {
    display: block;
    line-height: 0.9;
}

.title-deep {
    font-family: 'Impact', 'Arial Black', 'Franklin Gothic Bold', sans-serif;
    font-size: 0.9em;
    font-weight: 900;
    letter-spacing: 3px;
    color: #ff0000;
    text-shadow: 
        7px 7px 0px #000,
        8px 8px 0px #000,
        9px 9px 0px #000,
        10px 10px 0px #000,
        11px 11px 7px rgba(0, 0, 0, 0.8);
    transform: skew(-5deg, 0deg);
    margin-bottom: 13px;
}

.title-kombat {
    font-family: 'Arial Black', 'Franklin Gothic Bold', 'Impact', sans-serif;
    font-size: 1em;
    font-weight: 900;
    letter-spacing: 2px;
    color: #ffffff;
    text-shadow: 
        7px 7px 0px #000,
        8px 8px 0px #000,
        9px 9px 0px #000,
        10px 10px 0px #000,
        11px 11px 7px rgba(0, 0, 0, 0.8);
    transform: skew(3deg, 0deg);
    margin-bottom: -7px;
}

/* Ready Text for Selected Players */
.ready-text {
    position: fixed;
    font-family: 'Arial Black', 'Franklin Gothic Bold', 'Impact', sans-serif;
    font-size: 2.975em;
    font-weight: 900;
    color: #ffcc00;
    text-transform: uppercase;
    letter-spacing: 7px;
    text-shadow: 
        3px 3px 0px #000,
        4px 4px 0px #000,
        5px 5px 0px #000,
        6px 6px 0px #000,
        7px 7px 5px rgba(0, 0, 0, 0.8),
        0 0 20px rgba(255, 204, 0, 0.6);
    z-index: 15;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

.ready-text.visible {
    opacity: 1;
    visibility: visible;
}

.ready-text-p1 {
    top: 34px;
    left: 43px;
}

.ready-text-p2 {
    top: 34px;
    right: 43px;
}

/* Coming Soon Text for Unavailable Characters */
.coming-soon-text {
    position: fixed;
    font-family: 'Arial Black', 'Franklin Gothic Bold', 'Impact', sans-serif;
    font-size: 2.975em;
    font-weight: 900;
    color: #ffffff;
    text-transform: uppercase;
    letter-spacing: 7px;
    text-shadow: 
        3px 3px 0px #000,
        4px 4px 0px #000,
        5px 5px 0px #000,
        6px 6px 0px #000,
        7px 7px 5px rgba(0, 0, 0, 0.8);
    z-index: 15;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease, font-size 0.3s ease;
}

.coming-soon-text.visible {
    opacity: 1;
    visibility: visible;
    animation: coming-soon-flash 2s infinite;
}

.coming-soon-text.flashing {
    animation: coming-soon-flash-fast 0.8s infinite;
}

.coming-soon-text.big {
    font-size: 3.825em;
}

.coming-soon-text-p1 {
    top: 34px;
    left: 43px;
}

.coming-soon-text-p2 {
    top: 34px;
    right: 43px;
}

@keyframes coming-soon-flash {
    0%, 100% {
        opacity: 1;
        color: #ffffff;
    }
    50% {
        opacity: 0.5;
        color: #888888;
    }
}

@keyframes coming-soon-flash-fast {
    0%, 100% {
        opacity: 1;
        color: #ffffff;
    }
    50% {
        opacity: 0.3;
        color: #666666;
    }
}

/* Choose Your Fighter Text */
#choose-fighter-text {
    font-family: 'Arial Black', 'Franklin Gothic Bold', 'Impact', sans-serif;
    font-size: 1.7em;
    font-weight: 900;
    color: #fff;
    text-transform: uppercase;
    letter-spacing: 7px;
    text-shadow: 
        3px 3px 0px #000,
        4px 4px 0px #000,
        5px 5px 0px #000,
        6px 6px 0px #000,
        7px 7px 5px rgba(0, 0, 0, 0.8);
    margin: 0;
    text-align: center;
    z-index: 10;
    position: fixed;
    bottom: calc(68px + 553px + 17px);
    left: 50%;
    transform: translateX(-50%) translateY(0); /* Final position */
    /* Initially hidden during loading - start above screen */
    opacity: 0;
    visibility: hidden;
    transition: none; /* Remove transition, use animation instead */
}

/* Slide-in from top animation for choose fighter text */
#choose-fighter-text.slide-in {
    opacity: 1;
    visibility: visible;
    animation: chooseFighterSlideIn 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

@keyframes chooseFighterSlideIn {
    0% {
        opacity: 0;
        transform: translateX(-50%) translateY(-100%);
    }
    100% {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

/* Character Grid Container - Already defined in character-select.css */

/* Hidden character selection panels (for custom model loading) */
#character-selection {
    display: flex;
    gap: 20px;
    align-items: stretch;
    justify-content: center;
    flex: 1;
    min-height: 0;
    z-index: 10;
    position: relative;
}

.panel {
    background: rgba(26, 26, 26, 0.9);
    padding: 20px;
    border-radius: 0;
    margin: 10px;
    width: 500px;
    max-width: 500px;
    border: 2px solid #444;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.8);
    max-height: calc(100vh - 200px);
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

/* Character Preview Areas */
.preview-container {
    flex: 1;
    min-height: 300px;
    position: relative;
    border-radius: 0;
    overflow: hidden;
    margin-bottom: 15px;
    background: linear-gradient(45deg, #0a0a0a, #1a1a1a);
    border: 2px solid #333;
    box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.8);
}

.preview-canvas {
    width: 100%;
    height: 100%;
    display: block;
}

.menu-section {
    flex-shrink: 0;
    max-height: 50vh;
    overflow-y: auto;
    overflow-x: hidden;
    padding: 15px 15px 30px 15px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 0;
    scrollbar-width: thin;
    scrollbar-color: #444 #222;
    scroll-padding-bottom: 20px;
}

.menu-section::-webkit-scrollbar {
    width: 8px;
}

.menu-section::-webkit-scrollbar-track {
    background: #222;
    border-radius: 0;
}

.menu-section::-webkit-scrollbar-thumb {
    background: #444;
    border-radius: 0;
    border: 1px solid #333;
}

.menu-section::-webkit-scrollbar-thumb:hover {
    background: #555;
}

.preview-overlay {
    position: absolute;
    top: 10px;
    left: 10px;
    background: rgba(0, 0, 0, 0.7);
    color: #ffcc00;
    padding: 8px 12px;
    border-radius: 0;
    font-size: 0.9em;
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.loading-overlay {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #fff;
    font-size: 1.2em;
    font-weight: bold;
    text-align: center;
}

.character-pose {
    position: absolute;
    bottom: 10px;
    right: 10px;
    background: rgba(255, 204, 0, 0.9);
    color: #000;
    padding: 5px 10px;
    border-radius: 0;
    font-size: 0.8em;
    font-weight: bold;
}

.panel h2 {
    color: #ffcc00;
    margin-top: 0;
    border-bottom: 2px solid #333;
    padding-bottom: 10px;
    text-align: center;
    margin-bottom: 15px;
    flex-shrink: 0;
}

label {
    display: block;
    margin: 12px 0 4px;
    font-size: 0.8em;
    color: #888;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.optional {
    color: #ffaa00;
}

.optional.death {
    color: #ff4444;
}

select,
input {
    width: 100%;
    padding: 8px;
    background: #222;
    color: #eee;
    border: 1px solid #444;
    border-radius: 0;
}

button {
    background: #ffcc00;
    color: #000;
    border: none;
    padding: 15px;
    font-size: 1.2em;
    font-weight: 900;
    cursor: pointer;
    margin-top: 20px;
    width: 100%;
    text-transform: uppercase;
    clip-path: polygon(0 0, 100% 0, 95% 100%, 5% 100%);
    transition: all 0.3s ease;
}

button:hover {
    background: #ffe066;
}

#btn-start {
    background: linear-gradient(135deg, #00cc00 0%, #00ff00 100%);
    color: #000;
    font-size: 1.7em;
    font-weight: 900;
    padding: 21px;
    width: 383px;
    max-width: 90%;
    display: none;
    border: 3px solid #00ff00;
    border-radius: 0;
    box-shadow: 0 0 40px rgba(0, 255, 0, 0.8),
                inset 0 0 20px rgba(255, 255, 255, 0.3);
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
    letter-spacing: 3px;
    z-index: 10;
    position: fixed;
    bottom: 128px;
    left: 50%;
    transform: translateX(-50%);
}

#btn-start:disabled {
    background: linear-gradient(135deg, #666666 0%, #888888 100%);
    color: #444;
    cursor: not-allowed;
    opacity: 0.5;
    border-color: #666;
    box-shadow: none;
}

#btn-start:not(:disabled):hover {
    background: linear-gradient(135deg, #00ff00 0%, #66ff66 100%);
    box-shadow: 0 0 60px rgba(0, 255, 0, 1),
                inset 0 0 30px rgba(255, 255, 255, 0.4);
    transform: translateX(-50%) scale(1.05);
}

#btn-start:not(:disabled):active {
    background: linear-gradient(135deg, #ff6600 0%, #ff9900 100%);
    border-color: #ff9900;
    box-shadow: 0 0 60px rgba(255, 153, 0, 1),
                inset 0 0 30px rgba(255, 255, 255, 0.4);
}

/* Loading State Classes - Progressive Reveal */
#setup-screen.loading-particles {
    /* Particles visible, everything else hidden */
}

#setup-screen.loading-particles #character-grid-container,
#setup-screen.loading-particles #choose-fighter-text,
#setup-screen.loading-particles .character-name-display,
#setup-screen.loading-particles #character-info-panel,
#setup-screen.loading-particles .background-png {
    opacity: 0;
    visibility: hidden;
}

#setup-screen.loading-title {
    /* Title animating in */
}

#setup-screen.loading-title #character-grid-container,
#setup-screen.loading-title #choose-fighter-text,
#setup-screen.loading-title .character-name-display,
#setup-screen.loading-title #character-info-panel,
#setup-screen.loading-title .background-png {
    opacity: 0;
    visibility: hidden;
}

#setup-screen.loading-grid {
    /* Grid becomes visible */
}

#setup-screen.loading-grid #character-grid-container {
    /* Animation triggered by adding pop-visible class */
}

#setup-screen.loading-grid #character-grid-container.pop-visible {
    opacity: 1;
    visibility: visible;
}

#setup-screen.loading-grid #choose-fighter-text {
    /* Keep hidden until slide-in animation is triggered */
    opacity: 0 !important;
    visibility: hidden !important;
}

#setup-screen.loading-grid .character-name-display.pop-visible {
    opacity: 1;
    visibility: visible;
}

#setup-screen.loading-grid #character-info-panel.pop-visible {
    opacity: 1;
    visibility: visible;
}

#setup-screen.loading-characters {
    /* Characters loading sequentially */
}

#setup-screen.loading-characters #character-grid-container {
    opacity: 1;
    visibility: visible;
}

#setup-screen.loading-characters #choose-fighter-text {
    /* Keep hidden until slide-in animation is triggered */
    opacity: 0 !important;
    visibility: hidden !important;
}

#setup-screen.loading-characters #choose-fighter-text.slide-in {
    opacity: 1 !important;
    visibility: visible !important;
}

#setup-screen.loaded {
    /* All loading complete - normal state */
}

#setup-screen.loaded #character-grid-container,
#setup-screen.loaded #choose-fighter-text,
#setup-screen.loaded .character-name-display,
#setup-screen.loaded #character-info-panel {
    opacity: 1;
    visibility: visible;
}

/* Responsive Design */
@media (max-width: 1200px) {
    #character-info-panel {
        width: 213px; /* Fixed width for responsive */
        min-width: 213px;
        max-width: 213px;
        min-height: 94px;
        padding: 17px 21px;
    }

    .character-name-display {
        font-size: 3.825em;
    }

    .character-record {
        font-size: 1.4em;
    }

    .character-difficulty {
        font-size: 1.2em;
    }

    #setup-screen h1.game-title-logo {
        font-size: 4.08em; /* Final size after animation - bigger */
    }
    
    /* Adjust animation for responsive - slide in from top */
    #setup-screen h1.game-title-logo.title-visible {
        animation: titleSlideIn 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
    }
    
    #setup-screen h1.game-title-logo .title-word {
        line-height: 0.85;
    }
    
    #setup-screen h1.game-title-logo .title-deep {
        font-size: 0.9em;
        letter-spacing: 2px;
        text-shadow: 
            6px 6px 0px #000,
            7px 7px 0px #000,
            8px 8px 0px #000,
            9px 9px 0px #000,
            10px 10px 6px rgba(0, 0, 0, 0.8);
    }
    
    #setup-screen h1.game-title-logo .title-kombat {
        font-size: 1em;
        letter-spacing: 1px;
        text-shadow: 
            6px 6px 0px #000,
            7px 7px 0px #000,
            8px 8px 0px #000,
            9px 9px 0px #000,
            10px 10px 6px rgba(0, 0, 0, 0.8);
    }

    #choose-fighter-text {
        font-size: 1.7em;
    }

    #press-start-text {
        font-size: 1.28em;
    }

    .panel {
        width: 450px;
        max-width: 450px;
    }
}

@media (max-width: 1000px) {
    #setup-screen {
        padding: 15px;
    }

    .panel {
        width: 400px;
        max-width: 400px;
        padding: 15px;
    }

    .menu-section {
        max-height: 45vh;
    }
}

@media (max-width: 850px) {
    #setup-screen {
        align-items: stretch;
    }

    #character-selection {
        flex-direction: column;
        align-items: center;
        gap: 20px;
    }

    .panel {
        width: 100%;
        max-width: 600px;
        min-width: 350px;
    }

    .menu-section {
        max-height: 40vh;
    }

    #character-info-panel {
        position: relative;
        top: auto;
        left: auto;
        margin: 10px;
        width: calc(100% - 20px);
        min-width: 200px;
        max-width: 500px;
        min-height: 100px;
    }

    #press-start-text {
        font-size: 1.02em;
        top: 13px;
        right: 13px;
    }

    #setup-screen h1.game-title-logo {
        font-size: 3.57em; /* Final size after animation - bigger */
    }
    
    /* Adjust animation for responsive - slide in from top */
    #setup-screen h1.game-title-logo.title-visible {
        animation: titleSlideIn 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
    }
    
    #setup-screen h1.game-title-logo .title-deep {
        text-shadow: 
            5px 5px 0px #000,
            6px 6px 0px #000,
            7px 7px 0px #000,
            8px 8px 0px #000,
            9px 9px 5px rgba(0, 0, 0, 0.8);
    }
    
    #setup-screen h1.game-title-logo .title-kombat {
        text-shadow: 
            5px 5px 0px #000,
            6px 6px 0px #000,
            7px 7px 0px #000,
            8px 8px 0px #000,
            9px 9px 5px rgba(0, 0, 0, 0.8);
    }

    #choose-fighter-text {
        font-size: 1.53em;
    }
}

@media (max-height: 700px) {
    .panel {
        max-height: calc(100vh - 150px);
    }

    .menu-section {
        max-height: 35vh;
    }

    .preview-container {
        min-height: 250px;
    }
}

@media (max-height: 600px) {
    .panel {
        max-height: calc(100vh - 120px);
    }

    .menu-section {
        max-height: 30vh;
    }

    .preview-container {
        min-height: 200px;
    }
}

@media (max-width: 600px) {
    #character-info-panel {
        padding: 15px 20px;
        width: calc(100% - 20px);
        min-width: 180px;
        max-width: 400px;
        min-height: 90px;
    }

    .character-name-display {
        font-size: 2.975em;
        letter-spacing: 2px;
    }

    .character-record {
        font-size: 1.3em;
    }

    .character-difficulty {
        font-size: 1.2em;
    }

    #setup-screen h1.game-title-logo {
        font-size: 2.55em; /* Final size after animation - bigger */
    }
    
    /* Adjust animation for responsive - slide in from top */
    #setup-screen h1.game-title-logo.title-visible {
        animation: titleSlideIn 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
    }
    
    #setup-screen h1.game-title-logo .title-deep {
        letter-spacing: 1px;
        font-size: 0.85em;
        text-shadow: 
            4px 4px 0px #000,
            5px 5px 0px #000,
            6px 6px 0px #000,
            7px 7px 0px #000,
            8px 8px 4px rgba(0, 0, 0, 0.8);
    }
    
    #setup-screen h1.game-title-logo .title-kombat {
        letter-spacing: 0.5px;
        font-size: 0.9em;
        text-shadow: 
            4px 4px 0px #000,
            5px 5px 0px #000,
            6px 6px 0px #000,
            7px 7px 0px #000,
            8px 8px 4px rgba(0, 0, 0, 0.8);
    }

    #choose-fighter-text {
        font-size: 1.28em;
        letter-spacing: 3px;
    }

    #press-start-text {
        font-size: 0.85em;
        top: 9px;
        right: 9px;
    }

    #btn-start {
        font-size: 1.28em;
        padding: 17px;
    }
}
